FROM python:3.8.16-bullseye

WORKDIR /app
ADD ./ ./
RUN apt update && apt upgrade -y
RUN apt install build-essential cmake libsndfile1 -y
RUN git clone https://github.com/espnet/espnet -b master
RUN cd ./espnet/tools && ./setup_python.sh $(which python3) && make
RUN pip install -r requirements.txt
RUN pip install -r requirements-coeiroink.txt

EXPOSE 50031
CMD ["python", "run.py"]
